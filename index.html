<script src="https://js-eu1.hsforms.net/forms/v2.js" defer></script>

<script>
  function applyMarketingOverrides(host) {
    const formEl = host.querySelector("form");
    if (!formEl) return;

    // Force labels for the 3 fields (by order, not by name)
    const inputs = Array.from(formEl.querySelectorAll('input.hs-input, input[type="text"], input[type="email"]'))
      .filter(i => i.type !== "hidden");

    const wanted = ["Name", "Last name", "Email"];

    wanted.forEach((txt, idx) => {
      const input = inputs[idx];
      if (!input) return;

      const field = input.closest(".hs-form-field") || input.parentElement;
      if (!field) return;

      let lbl = field.querySelector(":scope > label");
      if (!lbl) {
        lbl = document.createElement("label");
        field.insertBefore(lbl, field.firstChild);
      }

      lbl.textContent = txt;
      lbl.style.setProperty("display", "block", "important");
      lbl.style.setProperty("margin", "0 0 8px", "important");
      lbl.style.setProperty("font-size", "13px", "important");
      lbl.style.setProperty("color", "rgba(229,231,235,0.85)", "important");
      if (input.id) lbl.setAttribute("for", input.id);
    });

    // Button: text + centered + gray
    const btn = formEl.querySelector('input[type="submit"], button[type="submit"]');
    if (btn) {
      const cta = "Letâ€™s talk!";
      if (btn.tagName.toLowerCase() === "input") btn.value = cta;
      else btn.textContent = cta;

      const wrap = btn.closest(".hs_submit") || btn.closest(".actions") || btn.parentElement;
      if (wrap) {
        wrap.style.setProperty("display", "flex", "important");
        wrap.style.setProperty("justify-content", "center", "important");
        wrap.style.setProperty("width", "100%", "important");
        wrap.style.setProperty("margin-top", "12px", "important");
      }

      btn.style.setProperty("height", "44px", "important");
      btn.style.setProperty("padding", "0 22px", "important");
      btn.style.setProperty("border-radius", "12px", "important");
      btn.style.setProperty("border", "1px solid rgba(255,255,255,0.18)", "important");
      btn.style.setProperty("background", "rgba(255,255,255,0.14)", "important");
      btn.style.setProperty("color", "#e5e7eb", "important");
      btn.style.setProperty("font-weight", "800", "important");
      btn.style.setProperty("cursor", "pointer", "important");
    }
  }

  function mount() {
    const host = document.getElementById("hs-form-target");
    if (!host || !window.hbspt?.forms?.create) return;

    // Render the form once
    window.hbspt.forms.create({
      region: "eu1",
      portalId: "146828710",
      formId: "fea75d46-afb0-4038-8af4-9057aff3cb3d",
      target: "#hs-form-target",
      css: "",
      onFormReady: () => applyMarketingOverrides(host)
    });

    // Re-apply aggressively for a few seconds (HubSpot can rerender)
    let i = 0;
    const t = setInterval(() => {
      applyMarketingOverrides(host);
      i += 1;
      if (i >= 40) clearInterval(t);
    }, 250);
  }

  window.addEventListener("load", mount);
</script>
