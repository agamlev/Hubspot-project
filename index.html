<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Convert to lead</title>

  <!-- HubSpot tracking -->
  <script async defer src="https://js-eu1.hs-scripts.com/146828710.js"></script>

  <!-- Site styles -->
  <link rel="stylesheet" href="styles.css" />
  <!-- Form styles -->
  <link rel="stylesheet" href="hubspot-form.css" />
</head>

<body>
  <header class="hero">
    <h1>Convert to lead</h1>
    <p>Fill the form below to create a real HubSpot contact</p>
  </header>

  <main class="container">
    <section class="card cta-card">
      <h2>Get early access</h2>
      <p>Leave your details and we’ll be in touch shortly</p>

      <!-- HubSpot Developer Embed Target -->
      <div class="hs-embed-wrap">
        <div class="hs-form-html"
             data-region="eu1"
             data-form-id="fea75d46-afb0-4038-8af4-9057aff3cb3d"
             data-portal-id="146828710"></div>
      </div>

      <div class="fineprint">
        Tracking and analytics handled by HubSpot.
      </div>
    </section>
  </main>

  <footer class="footer">
    Demo environment · HubSpot developer embed
  </footer>

  <!-- HubSpot Developer Embed Script (must be after the target div) -->
  <script src="https://js-eu1.hsforms.net/forms/embed/developer/146828710.js" defer></script>

  <script>
    // This embed renders asynchronously. We wait for the form DOM, then override labels + CTA.
    function applyMarketingOverrides(root) {
      const form = root.querySelector("form");
      if (!form) return false;

      // 1) Force labels by input order (more reliable than name matching across HS configs)
      const inputs = Array.from(
        form.querySelectorAll('input.hs-input, input[type="text"], input[type="email"], input[type="tel"]')
      ).filter(i => i.type !== "hidden");

      const wanted = ["Name", "Last name", "Email"];

      wanted.forEach((txt, idx) => {
        const input = inputs[idx];
        if (!input) return;

        const field = input.closest(".hs-form-field") || input.parentElement;
        if (!field) return;

        let lbl = field.querySelector(":scope > label");
        if (!lbl) {
          lbl = document.createElement("label");
          field.insertBefore(lbl, field.firstChild);
        }

        lbl.textContent = txt;
        lbl.style.setProperty("display", "block", "important");
        lbl.style.setProperty("margin", "0 0 8px", "important");
        lbl.style.setProperty("font-size", "13px", "important");
        lbl.style.setProperty("color", "rgba(229,231,235,0.85)", "important");
        if (input.id) lbl.setAttribute("for", input.id);
      });

      // 2) Button: center + gray + new text
      const btn = form.querySelector('input[type="submit"], button[type="submit"]');
      if (btn) {
        const cta = "Let’s talk!";
        if (btn.tagName.toLowerCase() === "input") btn.value = cta;
        else btn.textContent = cta;

        const wrap = btn.closest(".hs_submit") || btn.closest(".actions") || btn.parentElement;
        if (wrap) {
          wrap.style.setProperty("display", "flex", "important");
          wrap.style.setProperty("justify-content", "center", "important");
          wrap.style.setProperty("width", "100%", "important");
          wrap.style.setProperty("margin-top", "12px", "important");
        }

        btn.style.setProperty("height", "44px", "important");
        btn.style.setProperty("padding", "0 22px", "important");
        btn.style.setProperty("border-radius", "12px", "important");
        btn.style.setProperty("border", "1px solid rgba(255,255,255,0.18)", "important");
        btn.style.setProperty("background", "rgba(255,255,255,0.14)", "important");
        btn.style.setProperty("color", "#e5e7eb", "important");
        btn.style.setProperty("font-weight", "800", "important");
        btn.style.setProperty("cursor", "pointer", "important");
      }

      return true;
    }

    window.addEventListener("load", () => {
      const root = document.querySelector(".hs-form-html");
      if (!root) return;

      // Retry a bit, then keep watching for DOM changes (HubSpot can rerender)
      let tries = 0;
      const t = setInterval(() => {
        tries += 1;
        if (applyMarketingOverrides(root) || tries >= 120) clearInterval(t);
      }, 100);

      const obs = new MutationObserver(() => applyMarketingOverrides(root));
      obs.observe(root, { childList: true, subtree: true });
    });
  </script>
</body>
</html>
