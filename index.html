<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Convert to lead</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- HubSpot tracking -->
  <script async defer src="https://js-eu1.hs-scripts.com/146828710.js"></script>

  <!-- Site styles -->
  <link rel="stylesheet" href="styles.css" />
  <!-- Form styles -->
  <link rel="stylesheet" href="hubspot-form.css" />
</head>

<body>
  <header class="hero">
    <h1>Convert to lead</h1>
    <p>Fill the form below to create a real HubSpot contact</p>
  </header>

  <main class="container">
    <section class="card cta-card">
      <h2>Get early access</h2>
      <p>Leave your details and we’ll be in touch shortly</p>

      <div class="hs-embed-wrap">
        <div id="hs-form-target"></div>
      </div>

      <div class="fineprint">
        Tracking and analytics handled by HubSpot.
      </div>
    </section>
  </main>

  <footer class="footer">
    Demo environment · HubSpot forms via v2.js
  </footer>

  <!-- HubSpot forms v2 -->
  <script src="https://js-eu1.hsforms.net/forms/v2.js" defer></script>

  <script>
    function setSubmitText(formEl) {
      const btn = formEl.querySelector('input[type="submit"], button[type="submit"]');
      if (!btn) return;

      const txt = "Let’s talk!";
      if (btn.tagName.toLowerCase() === "input") btn.value = txt;
      else btn.textContent = txt;
    }

    function centerSubmit(formEl) {
      const submitWrap =
        formEl.querySelector(".hs_submit") ||
        formEl.querySelector(".actions") ||
        (formEl.querySelector('input[type="submit"], button[type="submit"]')?.parentElement);

      if (submitWrap) submitWrap.classList.add("hs-actions-centered");
    }

    function ensureLabels(formEl) {
      const fields = formEl.querySelectorAll(".hs-form-field");
      fields.forEach(field => {
        const input = field.querySelector("input, select, textarea");
        if (!input) return;

        const existing = field.querySelector(":scope > label");
        const hasLabel = existing && existing.textContent && existing.textContent.trim().length > 0;
        if (hasLabel) return;

        const name = (input.name || "").toLowerCase();
        let labelText =
          input.getAttribute("data-label") ||
          input.getAttribute("aria-label") ||
          input.getAttribute("placeholder") ||
          "";

        if (!labelText) {
          if (name.includes("firstname")) labelText = "First name";
          else if (name.includes("lastname")) labelText = "Last name";
          else if (name.includes("email")) labelText = "Email";
          else if (name.includes("phone")) labelText = "Phone";
          else if (name.includes("company")) labelText = "Company";
          else labelText = "Details";
        }

        const lbl = document.createElement("label");
        lbl.textContent = labelText;
        if (input.id) lbl.setAttribute("for", input.id);
        field.insertBefore(lbl, field.firstChild);
      });
    }

    window.addEventListener("load", () => {
      if (!window.hbspt?.forms?.create) return;

      window.hbspt.forms.create({
        region: "eu1",
        portalId: "146828710",
        formId: "fea75d46-afb0-4038-8af4-9057aff3cb3d",
        target: "#hs-form-target",
        css: "",

        onFormReady: function(container) {
          const formEl =
            (container instanceof HTMLElement && (container.matches("form") ? container : container.querySelector("form"))) ||
            document.querySelector("#hs-form-target form");

          if (!formEl) return;

          setSubmitText(formEl);
          centerSubmit(formEl);
          ensureLabels(formEl);
        }
      });
    });
  </script>
</body>
</html>
