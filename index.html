<script>
  function applyCustomLabelsAndCTA(formEl) {
    const setLabel = (selector, text) => {
      const input = formEl.querySelector(selector);
      if (!input) return;

      const field =
        input.closest(".hs-form-field") ||
        input.closest(".field") ||
        input.parentElement;

      if (!field) return;

      const existing = field.querySelector(":scope > label");
      if (existing && existing.textContent.trim()) {
        existing.textContent = text;
        return;
      }

      const lbl = document.createElement("label");
      lbl.textContent = text;
      if (input.id) lbl.setAttribute("for", input.id);
      field.insertBefore(lbl, field.firstChild);
    };

    // Labels
    setLabel('input[name="firstname"], input[name="first_name"], input[id*="firstname"]', "Name");
    setLabel('input[name="lastname"], input[name="last_name"], input[id*="lastname"]', "Last name");
    setLabel('input[name="email"], input[type="email"], input[id*="email"]', "Email");

    // Button text + center hook
    const btn = formEl.querySelector('input[type="submit"], button[type="submit"]');
    if (btn) {
      const cta = "Letâ€™s talk!";
      if (btn.tagName.toLowerCase() === "input") btn.value = cta;
      else btn.textContent = cta;

      const wrap =
        btn.closest(".hs_submit") ||
        btn.closest(".actions") ||
        btn.parentElement;

      if (wrap) wrap.classList.add("hs-actions-centered");
    }
  }

  window.addEventListener("load", () => {
    if (!window.hbspt?.forms?.create) return;

    window.hbspt.forms.create({
      region: "eu1",
      portalId: "146828710",
      formId: "fea75d46-afb0-4038-8af4-9057aff3cb3d",
      target: "#hs-form-target",
      css: "",
      onFormReady: function(container) {
        const formEl =
          (container instanceof HTMLElement && (container.matches("form") ? container : container.querySelector("form"))) ||
          document.querySelector("#hs-form-target form");

        if (!formEl) return;
        applyCustomLabelsAndCTA(formEl);
      }
    });
  });
</script>
